{% extends 'base.html' %}

{% block title %}Trading Tool{% endblock %}

{% block content %}
    <h1>Place an Order</h1>
    <form action="/place_order" method="post">
        <label for="symbol">Symbol:</label><br>
        <input type="text" id="symbol" name="symbol"><br>

        <label for="quantity">Quantity:</label><br>
        <input type="number" id="quantity" name="quantity"><br>

        <label for="transaction_type">Transaction Type:</label><br>
        <select id="transaction_type" name="transaction_type">
            <option value="BUY">BUY</option>
            <option value="SELL">SELL</option>
        </select><br>

        <label for="product">Product:</label><br>
        <select id="product" name="product">
            <option value="MIS">MIS (Intraday)</option>
            <option value="CNC">CNC (Delivery)</option>
            <option value="NRML">NRML (Normal F&O)</option>
        </select><br>

        <label for="exchange">Exchange:</label><br>
        <select id="exchange" name="exchange">
            <option value="NSE">NSE</option>
            <option value="BSE">BSE</option>
        </select><br>

        <label for="order_type">Order Type:</label><br>
        <select id="order_type" name="order_type">
            <option value="MARKET">Market</option>
            <option value="LIMIT">Limit</option>
            <option value="SL">Stoploss (SL)</option>
            <option value="SL-M">Stoploss-Market (SL-M)</option>
        </select><br>

        <label for="price">Price (for LIMIT and SL orders):</label><br>
        <input type="number" step="0.01" id="price" name="price"><br>

        <label for="stoploss">Stoploss (%):</label><br>
        <input type="number" step="0.01" id="stoploss" name="stoploss"><br>

        <input type="submit" value="Place Order">
    </form>

    <h2>Placed Orders</h2>
    <a href="/update_instruments"><button>Update Instruments</button></a>
    <table border="1">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Symbol</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Status</th>
                <th>Initial Stoploss</th>
                <th>Current Stoploss</th>
                <th>Potential Profit Locked In (%)</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>{{ order.order_id }}</td>
                <td>{{ order.symbol }}</td>
                <td>{{ order.quantity }}</td>
                <td>{{ order.price }}</td>
                <td>{{ order.status }}</td>
                <td>{{ order.initial_stoploss }}%</td>
                <td>{{ order.current_stoploss }}%</td>
                <td>{{ order.potential_profit }}%</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
